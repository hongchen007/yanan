<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title>爱情历程列表</title>    <meta name="renderer" content="webkit">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="viewport"          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">    <link rel="stylesheet" href="/static/layuiadmin/layui/css/layui.css" media="all">    <link rel="stylesheet" href="/static/layuiadmin/style/admin.css" media="all"></head><body><div class="layui-fluid">    <div class="layui-form layui-card-header layuiadmin-card-header-auto">        <div class="layui-form-item">            <div class="layui-inline">                <label class="layui-form-label">ID</label>                <div class="layui-input-inline">                    <input type="text" name="id" placeholder="请输入" autocomplete="off" class="layui-input">                </div>            </div>            <div class="layui-inline">                <label class="layui-form-label">时间</label>                <div class="layui-input-inline">                    <input type="text" name="history_year" placeholder="请输入时间" autocomplete="off"                           class="layui-input">                </div>            </div>            <div class="layui-inline">                <button class="layui-btn layuiadmin-btn-list" lay-submit lay-filter="LAY-app-contlist-search">                    <i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>                </button>            </div>        </div>    </div>    <div class="layui-card">        <div class="layui-card-header layuiadmin-card-header-auto">            <button class="layui-btn layuiadmin-btn-tags add" data-type="add">添加</button>        </div>        <div class="layui-card-body">            <table id="LAY-app-content-list" lay-filter="LAY-app-content-list"></table>            <script type="text/html" id="table-content-list">                <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i                        class="layui-icon layui-icon-edit"></i>编辑</a>                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i                        class="layui-icon layui-icon-delete"></i>删除</a>            </script>        </div>    </div></div><script src="/static/layuiadmin/layui/layui.js"></script><script src="/static/layuiadmin/layui/jquery-1.8.3.min.js"></script><script>    layui.config({        base: '/static/layuiadmin/' //静态资源所在路径    }).extend({        index: 'lib/index' //主入口模块    }).use(['table', 'layer', 'jquery'], function () {        var table = layui.table            , form = layui.form;        var $ = layui.$ //重点处        //监听搜索        form.on('submit(LAY-app-contlist-search)', function (data) {            var field = data.field;            //执行重载            table.reload('LAY-app-content-list', {                where: field            });        });        table.render({            elem: '#LAY-app-content-list'            , url: '/admin/Love_history/index' //数据接口            , page: true //开启分页            , cols: [[ //表头                {field: 'id', 'title': 'ID', id: 'id'}                , {field: 'history_year', 'title': '时间', history_year: 'history_year'}                , {field: 'history_contents', 'title': '描述', history_contents: 'history_contents'}                , {                    field: 'history_pic', 'title': '图片', history_pic: 'history_pic', templet: function (e) {                        return '<img  src="' + e.history_pic + '" style="height: 33px;">'                    }                }                , {field: 'create_time', 'title': '创建时间', create_time: 'create_time'}                , {fixed: 'right', width: 165, align: 'center', toolbar: '#table-content-list', title: '操作'}            ]],        });        table.on('tool(LAY-app-content-list)', function (obj) { //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"            if (obj.event == 'del') {                layer.confirm('确定删除么？', function (index) {                    $.post('/admin/Love_history/img_del', {'id': obj.data.id}, function (i) {                        if (i == 1) {                            layer.msg('删除成功！！！')                            setTimeout(function (){                                window.location.reload()                            }, 2000);                        } else {                            layer.msg('删除失败')                        }                    })                })            } else {                layer.open({                    type: 2                    , title: '修改 爱情历程'                    , content: 'update_edit?id=' + obj.data.id                    , area: ['50%', '75%']                    , yes: function (index, layero) {                    }                });            }        });        $('.add').click(function () {            layer.open({                type: 2                , title: '添加 爱情历程'                , content: 'add_img.html'                , area: ['50%', '70%']                , yes: function (index, layero) {                }            });        })    });</script></body></html>