<?php/** * Created by PhpStorm. * User: Administrator * Date: 2019/7/31 * Time: 15:26 */namespace app\admin\model;class Website extends BaseModel{	/**	 * 查找信息	 */	public function findinfo()	{		return $this->find();	}	/*	 * 执行修改网站信息	 * @param $date	 */	public function editinfo($arr,$date)	{		if (empty($arr)) {			unset($arr['id']);			$date['create_time'] = date('Y-m-d H:i:s',time());			$date['update_time'] = date('Y-m-d H:i:s',time());			$info = $this->allowField(true)->save($date);			if ($info) {				return true; //添加成功			} else {				return false; //添加失败			}		}		$date['update_time'] = date('Y-m-d H:i:s', time());		$date = array_merge($arr->toarray(),$date);		//        dump($date);		//        die;		if (empty($date['web_logo'])) {			//没有修改图片			unset($date['web_logo']);			$info = $this->allowField(true)->isUpdate(true)->update($date);			if ($info) {				return true; //修改成功			} else {				return false; //修改失败			}		} else {			//修改图片,修改成功删除图片			$picinfo = $this->where('id', $date['id'])->find();			$info = $this->allowField(true)->isUpdate(true)->update($date);			if ($info && !empty($picinfo['web_logo'])) {				@unlink($_SERVER["DOCUMENT_ROOT"] . $picinfo['web_logo']);				return true; //修改成功			} else {				return false; //修改失败			}		}	}}