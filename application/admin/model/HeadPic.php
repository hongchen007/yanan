<?php/** * Created by PhpStorm. * User: Administrator * Date: 2019/7/31 * Time: 15:26 */namespace app\admin\model;class HeadPic extends BaseModel{	/**	 * 查找信息	 */	public function findinfo()	{		return $this->find();	}	/*	 * 执行修改网站信息	 * @param $date	 */	public function editinfo($arr,$date)	{		$date['update_time'] = date('Y-m-d H:i:s', time());		$date = array_merge($arr->toarray(),$date);		//        dump($date);		//        die;		//修改图片,修改成功删除图片		$picinfo = $this->where('id', $date['id'])->find();		if (empty($date['boy_head']) && !empty($date['girl_head'])) {			//没有修改图片			unset($date['boy_head']);			$info = $this->allowField(true)->isUpdate(true)->update($date);			if ($info) {				@unlink($_SERVER["DOCUMENT_ROOT"] . $picinfo['girl_head']);				return true; //修改成功			} else {				return false; //修改失败			}		} elseif (!empty($date['boy_head']) && empty($date['girl_head'])){			//没有修改图片			unset($date['girl_head']);			$info = $this->allowField(true)->isUpdate(true)->update($date);			if ($info) {				@unlink($_SERVER["DOCUMENT_ROOT"] . $picinfo['girl_head']);				return true; //修改成功			} else {				return false; //修改失败			}		} elseif (!empty($date['boy_head']) && empty(!$date['girl_head'])){			//没有修改图片			$info = $this->allowField(true)->isUpdate(true)->update($date);			if ($info) {				@unlink($_SERVER["DOCUMENT_ROOT"] . $picinfo['boy_head']);				@unlink($_SERVER["DOCUMENT_ROOT"] . $picinfo['girl_head']);				return true; //修改成功			} else {				return false; //修改失败			}		} else {			//没有修改图片			return 101;		}	}}